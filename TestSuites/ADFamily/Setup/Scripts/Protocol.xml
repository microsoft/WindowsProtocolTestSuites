<lab>
  <core>
    <username>Administrator</username>
    <password>Password01!</password>
    <legacyclient>true</legacyclient>
    <basecpu>4</basecpu>
    <Description>AD Family Environment: PrimaryDomainController, SecondaryDomainController, ReadOnlyDomainController, ChildDomainController, TrustedDomainController, DomainMember, DriverComputer</Description>
  </core>
  <network>
    <vnet>
      <name>MS-AD-Internal</name>
      <networktype>Internal</networktype>
      <hostisgateway>true</hostisgateway>
      <ip>192.168.111.254</ip>
      <gateway>192.168.111.254</gateway>
      <subnet>255.255.255.0</subnet>
    </vnet>
  </network>
  <Parameters>
		<!--Parameters for automation run-->
		<Parameter Name="SelectedProtocols" Value="lsat,schema,drsr,publishdc,frs2,lsad,security,nrpc,ldap,apds,samr" Comment="Select test suite family members to run." />
		<Parameter Name="TestDriverName" Value="AD_ENDPOINT" Comment="Should be the VM name of the test driver." />
		<Parameter Name="BatchToRun" Value="RunAllTestCases.cmd" Comment="Which batch file to run test case." />
		<Parameter Name="EnableWindowsDebug" Value="false" Comment="Whether to enable the windows debugger." />
  </Parameters>
  <servers>
    <vm>
      <installorder>1</installorder>
      <role>PrimaryDomainController</role>
      <hypervname>AD_PDC</hypervname>
      <name>PDC</name>
      <sku>server</sku>
      <isdc>true</isdc>
      <domain>contoso.com</domain>
      <username>Administrator</username>
      <password>Password01!</password>
      <vnet>MS-AD-Internal</vnet>
      <ip>192.168.111.1</ip>
      <subnet>255.255.255.0</subnet>
      <gateway>192.168.111.1</gateway>
      <dns>192.168.111.2;192.168.111.1;192.168.111.5</dns>
      <alternateDNS>192.168.111.5</alternateDNS>
      <cpu>4</cpu>
      <memory>2048</memory>
      <minimumram>2048</minimumram>
      <maximumram>4096</maximumram>
      <installfeaturescript>Install_RemoteAccess_Feature.ps1;Install-ADDS.ps1</installfeaturescript>
      <postscript>Config-PDC.ps1</postscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <ldsinstancename>instance01</ldsinstancename>
      <ldsldapport>20000</ldsldapport>
      <ldssslport>20001</ldssslport>
      <ldsnewapplicationpartitiontocreate>CN=ApplicationNamingContext</ldsnewapplicationpartitiontocreate>
      <ldsserviceaccount>CONTOSO\Administrator</ldsserviceaccount>
      <ldsservicepassword>Password01!</ldsservicepassword>
      <ldsadministrator>CONTOSO\Administrator</ldsadministrator>
      <ldssourceusername>CONTOSO\Administrator</ldssourceusername>
      <ldssourcepassword>Password01!</ldssourcepassword>
      <clientname>ENDPOINT</clientname>
      <clientuser>userADTSSecurity</clientuser>
      <userpassword>Password01!</userpassword>
      <CAroot>EnterpriseRootCA</CAroot>
      <trusttargetdomain>trust.com</trusttargetdomain>
      <trustpassword>Password01!</trustpassword>
      <msaname>msa01</msaname>
      <msapassword>Password01!</msapassword>
    </vm>
    <vm>
      <installorder>2</installorder>
      <role>SecondaryDomainController</role>
      <hypervname>AD_SDC</hypervname>
      <name>SDC</name>
      <sku>server</sku>
      <isdc>true</isdc>
      <domain>contoso.com</domain>
      <username>Administrator</username>
      <password>Password01!</password>
      <vnet>MS-AD-Internal</vnet>
      <ip>192.168.111.2</ip>
      <subnet>255.255.255.0</subnet>
      <gateway>192.168.111.1</gateway>
      <dns>192.168.111.1</dns>
      <cpu>4</cpu>
      <memory>2048</memory>
      <minimumram>2048</minimumram>
      <maximumram>4096</maximumram>
      <installfeaturescript>Install-ADDS.ps1</installfeaturescript>
      <postscript>Config-SDC.ps1</postscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <replicasourcedc>PDC.contoso.com</replicasourcedc>
    </vm>
    <vm>
      <installorder>3</installorder>
      <role>ReadOnlyDomainController</role>
      <hypervname>AD_RODC</hypervname>
      <name>RODC</name>
      <sku>server</sku>
      <isdc>true</isdc>
      <domain>contoso.com</domain>
      <username>Administrator</username>
      <password>Password01!</password>
      <vnet>MS-AD-Internal</vnet>
      <ip>192.168.111.3</ip>
      <subnet>255.255.255.0</subnet>
      <gateway>192.168.111.1</gateway>
      <dns>192.168.111.1</dns>
      <cpu>4</cpu>
      <memory>2048</memory>
      <minimumram>2048</minimumram>
      <maximumram>4096</maximumram>
      <installfeaturescript>Install-ADDS.ps1</installfeaturescript>
      <postscript>Config-RODC.ps1</postscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <replicasourcedc>PDC.contoso.com</replicasourcedc>
    </vm>
    <vm>
      <installorder>4</installorder>
      <role>ChildDomainController</role>
      <hypervname>AD_CDC</hypervname>
      <name>CDC</name>
      <sku>server</sku>
      <isdc>true</isdc>
      <domain>child.contoso.com</domain>
      <username>Administrator</username>
      <password>Password01!</password>
      <vnet>MS-AD-Internal</vnet>
      <ip>192.168.111.4</ip>
      <subnet>255.255.255.0</subnet>
      <gateway>192.168.111.1</gateway>
      <dns>192.168.111.1</dns>
      <cpu>4</cpu>
      <memory>2048</memory>
      <minimumram>2048</minimumram>
      <maximumram>4096</maximumram>
      <installfeaturescript>Install-ADDS.ps1</installfeaturescript>
      <postscript>Config-CDC.ps1</postscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <primarydc>PDC.contoso.com</primarydc>
      <secondarydc>SDC.contoso.com</secondarydc>
      <parentdomain>contoso.com</parentdomain>
    </vm>
    <vm>
      <installorder>5</installorder>
      <role>TrustedDomainController</role>
      <hypervname>AD_TDC</hypervname>
      <name>TDC</name>
      <sku>server</sku>
      <isdc>true</isdc>
      <domain>trust.com</domain>
      <username>Administrator</username>
      <password>Password01!</password>
      <vnet>MS-AD-Internal</vnet>
      <ip>192.168.111.5</ip>
      <subnet>255.255.255.0</subnet>
      <dns>192.168.111.1;192.168.111.5</dns>
      <alternateDNS>192.168.111.1</alternateDNS>
      <cpu>4</cpu>
      <memory>2048</memory>
      <minimumram>2048</minimumram>
      <maximumram>4096</maximumram>
      <installfeaturescript>Install-ADDS.ps1</installfeaturescript>
      <postscript>Config-TDC.ps1</postscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <trusttargetdomain>contoso.com</trusttargetdomain>
      <trustpassword>Password01!</trustpassword>
      <trusttargetserver>PDC.contoso.com</trusttargetserver>
      <trusttargetuser>CONTOSO\Administrator</trusttargetuser>
      <trusttargetpwd>Password01!</trusttargetpwd>
    </vm>
    <vm>
      <installorder>6</installorder>
      <role>DomainMember</role>
      <hypervname>AD_DM</hypervname>
      <name>DM</name>
      <sku>server</sku>
      <domain>contoso.com</domain>
      <username>Administrator</username>
      <password>Password01!</password>
      <vnet>MS-AD-Internal</vnet>
      <ip>192.168.111.6</ip>
      <subnet>255.255.255.0</subnet>
      <gateway>192.168.111.1</gateway>
      <dns>192.168.111.1</dns>
      <cpu>4</cpu>
      <memory>2048</memory>
      <minimumram>2048</minimumram>
      <maximumram>4096</maximumram>
      <postscript>Config-DM.ps1</postscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <primarydc>PDC.contoso.com</primarydc>
      <secondarydc>SDC.contoso.com</secondarydc>
      <temppassword>Password02@</temppassword>
    </vm>
    <vm>
      <installorder>7</installorder>
      <role>DriverComputer</role>
      <hypervname>AD_ENDPOINT</hypervname>
      <name>ENDPOINT</name>
      <sku>client</sku>
      <domain>contoso.com</domain>
      <username>Administrator</username>
      <password>Password01!</password>
      <vnet>MS-AD-Internal</vnet>
      <ip>192.168.111.101</ip>
      <subnet>255.255.255.0</subnet>
      <gateway>192.168.111.1</gateway>
      <dns>192.168.111.1;192.168.111.4;192.168.111.5</dns>
      <alternateDNS>192.168.111.5</alternateDNS>
      <cpu>4</cpu>
      <memory>4096</memory>
      <minimumram>4096</minimumram>
      <maximumram>8192</maximumram>
      <installscript>InstallMSIAndTools.ps1</installscript>
      <postscript>Config-ENDPOINT.ps1</postscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <postscript>InstallMSIAndTools.ps1;SetPasswordNeverExpires.ps1;SetClientNetWorkPrivate.ps1;Config-ENDPOINT.ps1</postscript>
      <tools>
        <tool name="SE" MSIName="SpecExplorer.msi" version="3.5.3146.0" CPUArchitecture="x86" />
        <tool name="PTF" MSIName="ProtocolTestFrameworkInstaller.msi" version="1.0.6000.0" CPUArchitecture="x86" />
        <tool name="MMA" MSIName="MessageAnalyzer64.msi" version="4.0.8112.0" CPUArchitecture="x64" />
        <tool name="OpenXMLSDK" MSIName="OpenXMLSDKV25.msi" version="2.5.5631.0" CPUArchitecture="x86" />
        <TestsuiteMSI MSIName="ADFamily-TestSuite-ServerEP.msi" targetEndpoint="TESTSUITE" />
      </tools>
      <primarydc>PDC.contoso.com</primarydc>
      <primarydcip>192.168.111.1</primarydcip>
      <secondarydc>SDC.contoso.com</secondarydc>
      <secondarydcip>192.168.111.2</secondarydcip>
      <readonlydc>RODC.contoso.com</readonlydc>
      <readonlydcip>192.168.111.3</readonlydcip>
      <childdc>CDC.child.contoso.com</childdc>
      <childdcip>192.168.111.4</childdcip>
      <trustdc>TDC.trust.com</trustdc>
      <trustdcip>192.168.111.5</trustdcip>
      <dm>DM.contoso.com</dm>
      <dmip>192.168.111.6</dmip>
      <clientuser>userADTSSecurity</clientuser>
      <userpassword>Password01!</userpassword>
      <temppassword>Password02@</temppassword>
    </vm>
  </servers>
</lab>